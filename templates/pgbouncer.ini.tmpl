[pgbouncer]

admin_users = ubuntu, postgres, root, pgbouncer
stats_users = nagios

auth_file = /etc/pgbouncer/userlist.txt
auth_type = md5
pidfile = /var/run/postgresql/pgbouncer.pid
logfile = /var/log/postgresql/pgbouncer.log
unix_socket_dir = /var/run/postgresql
user = postgres

listen_addr = ${listen_addr}
listen_port = ${listen_port}

; pool_mode transaction assumes we don't use certain features of PG. See
; http://wiki.postgresql.org/wiki/PgBouncer#Feature_matrix_for_pooling_modes
pool_mode = ${pool_mode}
default_pool_size = ${default_pool_size}
reserve_pool_size = ${reserve_pool_size}

client_login_timeout = ${client_login_timeout}

; max client connections is per user/db - Note file descriptor limits need to
; be upped based on the following calculation:
; max_client_conn + (max_pool_size * total_databases * total_users)
max_client_conn = ${max_client_conn}

server_connect_timeout = ${server_connect_timeout}
server_idle_timeout = ${server_idle_timeout}
server_lifetime = ${server_lifetime}
server_login_retry = ${server_login_retry}
server_reset_query = DISCARD ALL;
server_check_delay = ${server_check_delay}
server_check_query = SELECT 1;
ignore_startup_parameters = ${ignore_startup_parameters}
