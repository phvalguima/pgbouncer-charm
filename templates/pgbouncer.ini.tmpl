;;
;; This file is generated and maintained by the pgbouncer juju charm.
;;
[databases]

{% for database_stanza in database_stanzas %}
{{ database_stanza }}
{% endfor %}

[pgbouncer]

listen_addr = {{ config.listen_addr}}
listen_port = {{ config.listen_port}}

{#  Note that a username generated for a relation can never match any of
    these administrative users. #}
admin_users = ubuntu, postgres, root, pgbouncer
stats_users = nagios

auth_file = /etc/pgbouncer/userlist.txt
auth_type = md5
pidfile = /var/run/postgresql/pgbouncer.pid
logfile = /var/log/postgresql/pgbouncer.log
unix_socket_dir = /var/run/postgresql
user = postgres

pool_mode = {{ config.pool_mode }}
default_pool_size = {{ config.default_pool_size }}
reserve_pool_size = {{ config.reserve_pool_size }}
max_client_conn = {{ config.max_client_conn }}

client_login_timeout = {{ config.client_login_timeout }}
server_connect_timeout = {{ config.server_connect_timeout }}
server_idle_timeout = {{ config.server_idle_timeout }}
server_lifetime = {{ config.server_lifetime }}
server_login_retry = {{ config.server_login_retry }}
server_reset_query = DISCARD ALL
server_check_delay = {{ config.server_check_delay }}
server_check_query = SELECT 1
ignore_startup_parameters = {{ config.ignore_startup_parameters }}
