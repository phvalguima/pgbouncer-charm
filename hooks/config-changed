#!/bin/bash

# Copyright 2012 Canonical Ltd. All rights reserved.
# Author: Haw Loeung <haw.loeung@canonical.com>

# pgbouncer charm config-changed hook

set -eux # -x for verbose logging to juju debug-log
. scripts/common

juju-log "Generating new pgbouncer configuration and init script"
update_config

ensure_package_status "${SERVICE_AFFECTING_PACKAGES}" $(config-get package_status)

juju-log "Reloading pgbouncer"
/usr/sbin/service pgbouncer reload
